!function(e){function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(t(1))},function(e,n,t){"use strict";function a(e,n,t){window.close()}function o(e,n,t){var a=e.attributes.AutoNavUrl||"";if(a&&a.length>0){window.open(a,"_self")}else alert("No AutoNavUrl specified in the outcome's attributes")}function r(e,n,t){var a=e.attributes.AutoOpenUrl||"";if(a&&a.length>0){window.open(a,"_blank")}else alert("No AutoOpenUrl specified in the outcome's attributes")}function u(e,n,t){window.print()}function i(e,n){if(manywho.OutcomeManager&&manywho.OutcomeManager.selectedOutcome&&manywho.OutcomeManager.selectedOutcome.attributes)for(var t in manywho.OutcomeManager.selectedOutcome.attributes)if(manywho.OutcomeManager.handlers[t]&&"true"===manywho.OutcomeManager.selectedOutcome.attributes[t]){manywho.OutcomeManager.handlers[t];manywho.OutcomeManager.handlers[t](manywho.OutcomeManager.selectedOutcome,e,manywho.OutcomeManager.originalRequest)}}function c(e,n){if(n){manywho.OutcomeManager.originalRequest=n,manywho.OutcomeManager.stateId=n.stateId;var t=n.mapElementInvokeRequest.selectedOutcomeId;if(manywho.OutcomeManager.tenantId&&manywho.OutcomeManager.stateId&&t){var a=manywho.OutcomeManager.tenantId+"___"+manywho.OutcomeManager.stateId;manywho.OutcomeManager.selectedOutcome=manywho.model.getOutcome(t,a)}}else manywho.OutcomeManager.originalRequest=null,manywho.OutcomeManager.stateId="",manywho.OutcomeManager.selectedOutcome=null}var m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function a(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=t(2),h=manywho.utils.parseQueryString(window.location.search.substring(1)),l=h["tenant-id"];l||(l=window.location.pathname.split("/").filter(function(e){return e&&e.length>0})[0]),manywho.OutcomeManager={},manywho.OutcomeManager.tenantId=l,manywho.OutcomeManager.originalRequest,manywho.OutcomeManager.handlers={},manywho.OutcomeManager.handlers.AutoClose=a,manywho.OutcomeManager.handlers.AutoOpen=r,manywho.OutcomeManager.handlers.AutoNav=o,manywho.OutcomeManager.handlers.ForcePrint=u;for(var f in manywho.OutcomeHandlers)manywho.OutcomeManager.handlers[f]=manywho.OutcomeHandlers[f];manywho.eventManager||(manywho.eventManager={},manywho.eventManager.beforeSendListeners=[],manywho.eventManager.doneListeners=[],manywho.eventManager.failListeners=[],manywho.eventManager.beforeSend=function(e,n){manywho.eventManager.beforeSendListeners.forEach(function(t){return t(e,n)})},manywho.eventManager.done=function(e,n){manywho.eventManager.doneListeners.forEach(function(t){return t(e,n)})},manywho.eventManager.fail=function(e,n){manywho.eventManager.failListeners.forEach(function(t){return t(e,n)})},manywho.eventManager.addBeforeSendListener=function(e){manywho.eventManager.beforeSendListeners.push(e)},manywho.eventManager.addDoneListener=function(e){manywho.eventManager.doneListeners.push(e)},manywho.eventManager.addFailListener=function(e){manywho.eventManager.failListeners.push(e)},manywho.settings.initialize(null,{invoke:{beforeSend:manywho.eventManager.beforeSend,done:manywho.eventManager.done,fail:manywho.eventManager.fail}})),manywho.eventManager.addBeforeSendListener(c),manywho.eventManager.addDoneListener(i);var d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return m(n,e),n}(s.Component);manywho.component.register("OutcomeManager",d),n.default=d},function(e,n){e.exports=React}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vT3V0Y29tZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDQ3ZDdhOTQwYWYxZjY5Njc0N2QxIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL091dGNvbWVNYW5hZ2VyLnRzeCIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdFwiIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ2YWx1ZSIsIk9NYXV0b0Nsb3NlIiwib3V0Y29tZSIsInhociIsInJlcXVlc3QiLCJ3aW5kb3ciLCJjbG9zZSIsIk9NYXV0b05hdiIsInRhcmdldFVybCIsImF0dHJpYnV0ZXMiLCJBdXRvTmF2VXJsIiwibGVuZ3RoIiwib3BlbiIsImFsZXJ0IiwiT01hdXRvT3BlbiIsIkF1dG9PcGVuVXJsIiwiT01mb3JjZVByaW50IiwicHJpbnQiLCJPTWRvbmVIYW5kbGVyIiwibWFueXdobyIsIk91dGNvbWVNYW5hZ2VyIiwic2VsZWN0ZWRPdXRjb21lIiwia2V5IiwiaGFuZGxlcnMiLCJvcmlnaW5hbFJlcXVlc3QiLCJPTWJlZm9yZVNlbmRIYW5kbGVyIiwic3RhdGVJZCIsIm91dGNvbWVJZCIsIm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0Iiwic2VsZWN0ZWRPdXRjb21lSWQiLCJ0ZW5hbnRJZCIsImZsb3dLZXkiLCJtb2RlbCIsImdldE91dGNvbWUiLCJfX2V4dGVuZHMiLCJ0aGlzIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsImNyZWF0ZSIsIlJlYWN0IiwicXVlcnlQYXJhbWV0ZXJzIiwidXRpbHMiLCJwYXJzZVF1ZXJ5U3RyaW5nIiwibG9jYXRpb24iLCJzZWFyY2giLCJzdWJzdHJpbmciLCJwYXRobmFtZSIsInNwbGl0IiwiZmlsdGVyIiwicGF0aCIsIk91dGNvbWVIYW5kbGVycyIsImV2ZW50TWFuYWdlciIsImJlZm9yZVNlbmRMaXN0ZW5lcnMiLCJkb25lTGlzdGVuZXJzIiwiZmFpbExpc3RlbmVycyIsImJlZm9yZVNlbmQiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJkb25lIiwiZmFpbCIsImFkZEJlZm9yZVNlbmRMaXN0ZW5lciIsImhhbmRsZXIiLCJwdXNoIiwiYWRkRG9uZUxpc3RlbmVyIiwiYWRkRmFpbExpc3RlbmVyIiwic2V0dGluZ3MiLCJpbml0aWFsaXplIiwiaW52b2tlIiwiX3N1cGVyIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJDb21wb25lbnQiLCJjb21wb25lbnQiLCJyZWdpc3RlciIsImRlZmF1bHQiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FJLEVBQUFKLEVBQ0FLLEdBQUEsRUFDQUgsV0FVQSxPQU5BSixHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBNEJBRixHQUFBUSxFQUFBVCxFQUdBQyxFQUFBUyxFQUFBUCxFQUdBRixFQUFBVSxFQUFBLFNBQUFQLEVBQUFRLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFWLEVBQUFRLElBQ0FHLE9BQUFDLGVBQUFaLEVBQUFRLEdBQ0FLLGNBQUEsRUFD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RmUsUUFBZ0JxQyxhQUFhUSxLQUFPLFNBQUM3RCxFQUFxQkMsR0FDdERlLFFBQWdCcUMsYUFBYUcsY0FBY0UsUUFBUSxTQUFDQyxHQUFrQixNQUFBQSxHQUFTM0QsRUFBS0MsTUFHeEZlLFFBQWdCcUMsYUFBYVMsc0JBQXdCLFNBQUNDLEdBQ2xEL0MsUUFBZ0JxQyxhQUFhQyxvQkFBb0JVLEtBQUtELElBRzFEL0MsUUFBZ0JxQyxhQUFhWSxnQkFBa0IsU0FBQ0YsR0FDNUMvQyxRQUFnQnFDLGFBQWFFLGNBQWNTLEtBQUtELElBR3BEL0MsUUFBZ0JxQyxhQUFhYSxnQkFBa0IsU0FBQ0gsR0FDNUMvQyxRQUFnQnFDLGFBQWFHLGNBQWNRLEtBQUtELElBR3JEL0MsUUFBUW1ELFNBQVNDLFdBQVcsTUFDeEJDLFFBQ0laLFdBQWF6QyxRQUFnQnFDLGFBQWFJLFdBQzFDRyxLQUFPNUMsUUFBZ0JxQyxhQUFhTyxLQUNwQ0MsS0FBTzdDLFFBQWdCcUMsYUFBYVEsU0FLaEQ3QyxRQUFRcUMsYUFBYVMsc0JBQXNCeEMsR0FDM0NOLFFBQVFxQyxhQUFhWSxnQkFBZ0JsRCxFQWlIckMsSUFBQUUsR0FBQSxTQUFBcUQsR0FBQSxRQUFBckQsS0g4Q1EsTUFBa0IsUUFBWHFELEdBQW1CQSxFQUFPQyxNQUFNdkMsS0FBTXdDLFlBQWN4QyxLRzVDbkUsTUFGNkJELEdBQUFkLEVBQUFxRCxHQUU3QnJELEdBRjZCd0IsRUFBTWdDLFVBSW5DekQsU0FBUTBELFVBQVVDLFNBQVMsaUJBQWtCMUQsR0FFN0M1QyxFQUFBdUcsUUFBZTNELEdIa0RULFNBQVUzQyxFQUFRRCxHSXZQeEJDLEVBQUFELFFBQUFvRSIsImZpbGUiOiJPdXRjb21lTWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFJlYWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcclxudmFyIHF1ZXJ5UGFyYW1ldGVycyA9IG1hbnl3aG8udXRpbHMucGFyc2VRdWVyeVN0cmluZyh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSk7XHJcbnZhciB0ZW5hbnRJZCA9IHF1ZXJ5UGFyYW1ldGVyc1sndGVuYW50LWlkJ107XHJcbmlmICghdGVuYW50SWQpIHtcclxuICAgIHRlbmFudElkID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lXHJcbiAgICAgICAgLnNwbGl0KCcvJylcclxuICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGggJiYgcGF0aC5sZW5ndGggPiAwO1xyXG4gICAgfSlbMF07XHJcbn1cclxuLy9kZWNsYXJlIGdsb2JhbCB7IGludGVyZmFjZSBXaW5kb3cge091dGNvbWVNYW5hZ2VyOiBhbnk7fX1cclxubWFueXdoby5PdXRjb21lTWFuYWdlciA9IHt9O1xyXG5tYW55d2hvLk91dGNvbWVNYW5hZ2VyLnRlbmFudElkID0gdGVuYW50SWQ7XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIub3JpZ2luYWxSZXF1ZXN0O1xyXG5tYW55d2hvLk91dGNvbWVNYW5hZ2VyLmhhbmRsZXJzID0ge307XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNbXCJBdXRvQ2xvc2VcIl0gPSBPTWF1dG9DbG9zZTtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1tcIkF1dG9PcGVuXCJdID0gT01hdXRvT3BlbjtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1tcIkF1dG9OYXZcIl0gPSBPTWF1dG9OYXY7XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNbXCJGb3JjZVByaW50XCJdID0gT01mb3JjZVByaW50O1xyXG5mb3IgKHZhciBrZXkgaW4gbWFueXdoby5PdXRjb21lSGFuZGxlcnMpIHtcclxuICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNba2V5XSA9IG1hbnl3aG8uT3V0Y29tZUhhbmRsZXJzW2tleV07XHJcbn1cclxuLy8gdGhpcyBhdHRhY2hlcyB0aGUgQWpheCBoYW5kbGVycyB0byB0aGUgbWFueXdoby5DdXN0b21Db21wb25lbnRPcmNoZXN0cmF0b3Igb3IgXHJcbi8vIGluaXRpYWxpemUgZnVuY3Rpb24gaWYgbWFueXdoby5DdXN0b21Db21wb25lbnRPcmNoZXN0cmF0b3IgaXNudCBkZWZpbmVkLiBcclxuaWYgKCFtYW55d2hvLmV2ZW50TWFuYWdlcikge1xyXG4gICAgbWFueXdoby5ldmVudE1hbmFnZXIgPSB7fTtcclxuICAgIG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmJlZm9yZVNlbmRMaXN0ZW5lcnMgPSBbXTtcclxuICAgIG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmRvbmVMaXN0ZW5lcnMgPSBbXTtcclxuICAgIG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmZhaWxMaXN0ZW5lcnMgPSBbXTtcclxuICAgIG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmJlZm9yZVNlbmQgPSBmdW5jdGlvbiAoeGhyLCByZXF1ZXN0KSB7XHJcbiAgICAgICAgbWFueXdoby5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgeyByZXR1cm4gbGlzdGVuZXIoeGhyLCByZXF1ZXN0KTsgfSk7XHJcbiAgICB9O1xyXG4gICAgbWFueXdoby5ldmVudE1hbmFnZXIuZG9uZSA9IGZ1bmN0aW9uICh4aHIsIHJlcXVlc3QpIHtcclxuICAgICAgICBtYW55d2hvLmV2ZW50TWFuYWdlci5kb25lTGlzdGVuZXJzLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyKSB7IHJldHVybiBsaXN0ZW5lcih4aHIsIHJlcXVlc3QpOyB9KTtcclxuICAgIH07XHJcbiAgICBtYW55d2hvLmV2ZW50TWFuYWdlci5mYWlsID0gZnVuY3Rpb24gKHhociwgcmVxdWVzdCkge1xyXG4gICAgICAgIG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmZhaWxMaXN0ZW5lcnMuZm9yRWFjaChmdW5jdGlvbiAobGlzdGVuZXIpIHsgcmV0dXJuIGxpc3RlbmVyKHhociwgcmVxdWVzdCk7IH0pO1xyXG4gICAgfTtcclxuICAgIG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmFkZEJlZm9yZVNlbmRMaXN0ZW5lciA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgbWFueXdoby5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfTtcclxuICAgIG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmFkZERvbmVMaXN0ZW5lciA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgbWFueXdoby5ldmVudE1hbmFnZXIuZG9uZUxpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfTtcclxuICAgIG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmFkZEZhaWxMaXN0ZW5lciA9IGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgbWFueXdoby5ldmVudE1hbmFnZXIuZmFpbExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfTtcclxuICAgIG1hbnl3aG8uc2V0dGluZ3MuaW5pdGlhbGl6ZShudWxsLCB7XHJcbiAgICAgICAgaW52b2tlOiB7XHJcbiAgICAgICAgICAgIGJlZm9yZVNlbmQ6IG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmJlZm9yZVNlbmQsXHJcbiAgICAgICAgICAgIGRvbmU6IG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmRvbmUsXHJcbiAgICAgICAgICAgIGZhaWw6IG1hbnl3aG8uZXZlbnRNYW5hZ2VyLmZhaWwsXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG59XHJcbm1hbnl3aG8uZXZlbnRNYW5hZ2VyLmFkZEJlZm9yZVNlbmRMaXN0ZW5lcihPTWJlZm9yZVNlbmRIYW5kbGVyKTtcclxubWFueXdoby5ldmVudE1hbmFnZXIuYWRkRG9uZUxpc3RlbmVyKE9NZG9uZUhhbmRsZXIpO1xyXG5mdW5jdGlvbiBPTWF1dG9DbG9zZShvdXRjb21lLCB4aHIsIHJlcXVlc3QpIHtcclxuICAgIHdpbmRvdy5jbG9zZSgpO1xyXG4gICAgcmV0dXJuO1xyXG59XHJcbmZ1bmN0aW9uIE9NYXV0b05hdihvdXRjb21lLCB4aHIsIHJlcXVlc3QpIHtcclxuICAgIHZhciB0YXJnZXRVcmwgPSBvdXRjb21lLmF0dHJpYnV0ZXMuQXV0b05hdlVybCB8fCBcIlwiO1xyXG4gICAgaWYgKHRhcmdldFVybCAmJiB0YXJnZXRVcmwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHZhciB3bmQgPSB3aW5kb3cub3Blbih0YXJnZXRVcmwsIFwiX3NlbGZcIik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhbGVydChcIk5vIEF1dG9OYXZVcmwgc3BlY2lmaWVkIGluIHRoZSBvdXRjb21lJ3MgYXR0cmlidXRlc1wiKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBPTWF1dG9PcGVuKG91dGNvbWUsIHhociwgcmVxdWVzdCkge1xyXG4gICAgdmFyIHRhcmdldFVybCA9IG91dGNvbWUuYXR0cmlidXRlcy5BdXRvT3BlblVybCB8fCBcIlwiO1xyXG4gICAgaWYgKHRhcmdldFVybCAmJiB0YXJnZXRVcmwubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHZhciB3bmQgPSB3aW5kb3cub3Blbih0YXJnZXRVcmwsIFwiX2JsYW5rXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgYWxlcnQoXCJObyBBdXRvT3BlblVybCBzcGVjaWZpZWQgaW4gdGhlIG91dGNvbWUncyBhdHRyaWJ1dGVzXCIpO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgIC8vdGhlIG91dGNvbWUncyAucGFnZU9iamVjdEJpbmRpbmdJZCB0ZWxscyB1cyB3aGljaCBjb21wb25lbnQgdHJpZ2dlcmVkIHRoZSBvdXRjb21lIGFuZCBpbnNlcnRlZCB0aGUgZGF0YVxyXG4gICAgdmFyIHRyaWdnZXJDb21wb25lbnQ9b3V0Y29tZS5wYWdlT2JqZWN0QmluZGluZ0lkO1xyXG5cclxuICAgIC8vZ2V0IHRoZSByZXNwb25zZSBmb3IgdGhlIGNvcnJlY3QgY29tcG9uZW50XHJcbiAgICB2YXIgcmVzcG9uc2UgOiBhbnk7XHJcbiAgICBmb3IodmFyIHBvcyA9IDAgOyBwb3MgPCByZXF1ZXN0Lm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0LnBhZ2VSZXF1ZXN0LnBhZ2VDb21wb25lbnRJbnB1dFJlc3BvbnNlcy5sZW5ndGggOyBwb3MrKylcclxuICAgIHtcclxuICAgICAgICB2YXIgaXRlbSA9IHJlcXVlc3QubWFwRWxlbWVudEludm9rZVJlcXVlc3QucGFnZVJlcXVlc3QucGFnZUNvbXBvbmVudElucHV0UmVzcG9uc2VzW3Bvc107XHJcbiAgICAgICAgaWYoaXRlbS5wYWdlQ29tcG9uZW50SWQgPT09IHRyaWdnZXJDb21wb25lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXNwb25zZSA9IGl0ZW07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZihyZXNwb25zZSlcclxuICAgIHtcclxuICAgICAgICB2YXIgdGFyZ2V0VXJpID0gcmVzcG9uc2UuY29udGVudFZhbHVlO1xyXG4gICAgICAgIHZhciB3bmQgPSB3aW5kb3cub3Blbih0YXJnZXRVcmksIFwiX2JsYW5rXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIGFsZXJ0KFwiZmFpbGVkIHRvIGdldCB1cmkgLSBwYWdlT2JqZWN0QmluZGluZ0lkIG5vdCBmb3VuZCBpbiBwYWdlQ29tcG9uZW50SW5wdXRSZXNwb25zZXNcIik7XHJcbiAgICB9XHJcbiAgICAqL1xyXG59XHJcbmZ1bmN0aW9uIE9NZm9yY2VQcmludChvdXRjb21lLCB4aHIsIHJlcXVlc3QpIHtcclxuICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgcmV0dXJuO1xyXG59XHJcbmZ1bmN0aW9uIE9NZG9uZUhhbmRsZXIoeGhyLCByZXF1ZXN0KSB7XHJcbiAgICAvL2NoZWNrIGNsb3NlIGZsYWcgYW5kIGlmIHNldCBqdXN0IGtpbGwgdGhlIHdpbmRvd1xyXG4gICAgaWYgKG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIgJiYgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUgJiYgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUuYXR0cmlidXRlcykge1xyXG4gICAgICAgIC8vbG9vcCBvdmVyIGVhY2ggb3V0Y29tZSBhbmQgY2FsbCBpdHMgYXNzb2NpYXRlZCBoYW5kbGVyIGluIHRoZSBwbGF5ZXIgaWYgaXQgZXhpc3RzXHJcbiAgICAgICAgLy9zb21lIGRlZmF1bHQgY29tbW9uIG9uZXMgd2lsbCBkZWZhdWx0IHRvIHRoZSBoYW5kbGVycyBpbiAgaGVyZSBpZiBub3QuXHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc2VsZWN0ZWRPdXRjb21lLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgaWYgKG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNba2V5XSAmJiBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnNlbGVjdGVkT3V0Y29tZS5hdHRyaWJ1dGVzW2tleV0gPT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnVuY3Rpb25OYW1lID0gbWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1trZXldKG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc2VsZWN0ZWRPdXRjb21lLCB4aHIsIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIub3JpZ2luYWxSZXF1ZXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vL3RoaXMgc2F2ZXMgdGhlIGxhc3Qgc2VsZWN0ZWQgb3V0Y29tZSBpbiB0aGUgT3V0Y29tZU1hbmFnZXIgICAgICAgICAgIFxyXG5mdW5jdGlvbiBPTWJlZm9yZVNlbmRIYW5kbGVyKHhociwgcmVxdWVzdCkge1xyXG4gICAgaWYgKHJlcXVlc3QpIHtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLm9yaWdpbmFsUmVxdWVzdCA9IHJlcXVlc3Q7XHJcbiAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zdGF0ZUlkID0gcmVxdWVzdC5zdGF0ZUlkO1xyXG4gICAgICAgIHZhciBvdXRjb21lSWQgPSByZXF1ZXN0Lm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0LnNlbGVjdGVkT3V0Y29tZUlkO1xyXG4gICAgICAgIGlmIChtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnRlbmFudElkICYmIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc3RhdGVJZCAmJiBvdXRjb21lSWQpIHtcclxuICAgICAgICAgICAgdmFyIGZsb3dLZXkgPSBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnRlbmFudElkICsgXCJfX19cIiArIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc3RhdGVJZDtcclxuICAgICAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUgPSBtYW55d2hvLm1vZGVsLmdldE91dGNvbWUob3V0Y29tZUlkLCBmbG93S2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLm9yaWdpbmFsUmVxdWVzdCA9IG51bGw7XHJcbiAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zdGF0ZUlkID0gXCJcIjtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnNlbGVjdGVkT3V0Y29tZSA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxudmFyIE91dGNvbWVNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKE91dGNvbWVNYW5hZ2VyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gT3V0Y29tZU1hbmFnZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE91dGNvbWVNYW5hZ2VyO1xyXG59KFJlYWN0LkNvbXBvbmVudCkpO1xyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignT3V0Y29tZU1hbmFnZXInLCBPdXRjb21lTWFuYWdlcik7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IE91dGNvbWVNYW5hZ2VyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gT3V0Y29tZU1hbmFnZXIuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCA0N2Q3YTk0MGFmMWY2OTY3NDdkMSIsImV4cG9ydCAqIGZyb20gJy4vT3V0Y29tZU1hbmFnZXInO1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXgudHN4IiwiZGVjbGFyZSB2YXIgbWFueXdobzogYW55O1xyXG5cclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuXHJcbnZhciBxdWVyeVBhcmFtZXRlcnMgPSBtYW55d2hvLnV0aWxzLnBhcnNlUXVlcnlTdHJpbmcod2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkpO1xyXG52YXIgdGVuYW50SWQgPSBxdWVyeVBhcmFtZXRlcnNbJ3RlbmFudC1pZCddO1xyXG5pZiAoIXRlbmFudElkKSBcclxue1xyXG4gICAgdGVuYW50SWQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLycpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChwYXRoKSBcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0aCAmJiBwYXRoLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgICAgICB9KVswXTtcclxufVxyXG4gICAgXHJcblxyXG5cclxuXHJcbi8vZGVjbGFyZSBnbG9iYWwgeyBpbnRlcmZhY2UgV2luZG93IHtPdXRjb21lTWFuYWdlcjogYW55O319XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIgPSB7fTtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci50ZW5hbnRJZCAgPSB0ZW5hbnRJZDtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci5vcmlnaW5hbFJlcXVlc3Q7XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnMgPSB7fTtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1tcIkF1dG9DbG9zZVwiXSA9IE9NYXV0b0Nsb3NlO1xyXG5tYW55d2hvLk91dGNvbWVNYW5hZ2VyLmhhbmRsZXJzW1wiQXV0b09wZW5cIl0gPSBPTWF1dG9PcGVuO1xyXG5tYW55d2hvLk91dGNvbWVNYW5hZ2VyLmhhbmRsZXJzW1wiQXV0b05hdlwiXSA9IE9NYXV0b05hdjtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1tcIkZvcmNlUHJpbnRcIl0gPSBPTWZvcmNlUHJpbnQ7XHJcblxyXG5cclxuZm9yKHZhciBrZXkgaW4gbWFueXdoby5PdXRjb21lSGFuZGxlcnMpXHJcbntcclxuICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNba2V5XSA9IG1hbnl3aG8uT3V0Y29tZUhhbmRsZXJzW2tleV07XHJcbn1cclxuICAgIFxyXG4vLyB0aGlzIGF0dGFjaGVzIHRoZSBBamF4IGhhbmRsZXJzIHRvIHRoZSBtYW55d2hvLkN1c3RvbUNvbXBvbmVudE9yY2hlc3RyYXRvciBvciBcclxuLy8gaW5pdGlhbGl6ZSBmdW5jdGlvbiBpZiBtYW55d2hvLkN1c3RvbUNvbXBvbmVudE9yY2hlc3RyYXRvciBpc250IGRlZmluZWQuIFxyXG5pZiAoIShtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyKSB7XHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlciA9IHt9O1xyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVycyA9IFtdO1xyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZG9uZUxpc3RlbmVycyA9IFtdO1xyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZmFpbExpc3RlbmVycyA9IFtdO1xyXG5cclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmJlZm9yZVNlbmQgPSAoeGhyOiBYTUxIdHRwUmVxdWVzdCwgcmVxdWVzdDogYW55KSA9PiB7XHJcbiAgICAgICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcjogYW55KSA9PiBsaXN0ZW5lcih4aHIsIHJlcXVlc3QpKTtcclxuICAgIH07XHJcblxyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuZG9uZSA9ICh4aHI6IFhNTEh0dHBSZXF1ZXN0LCByZXF1ZXN0OiBhbnkpID0+IHtcclxuICAgICAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5kb25lTGlzdGVuZXJzLmZvckVhY2goKGxpc3RlbmVyOiBhbnkpID0+IGxpc3RlbmVyKHhociwgcmVxdWVzdCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5mYWlsID0gKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4ge1xyXG4gICAgICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmZhaWxMaXN0ZW5lcnMuZm9yRWFjaCgobGlzdGVuZXI6IGFueSkgPT4gbGlzdGVuZXIoeGhyLCByZXF1ZXN0KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmFkZEJlZm9yZVNlbmRMaXN0ZW5lciA9IChoYW5kbGVyOiAoeGhyOiBYTUxIdHRwUmVxdWVzdCwgcmVxdWVzdDogYW55KSA9PiB2b2lkKSA9PiB7XHJcbiAgICAgICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYmVmb3JlU2VuZExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5hZGREb25lTGlzdGVuZXIgPSAoaGFuZGxlcjogKHhocjogWE1MSHR0cFJlcXVlc3QsIHJlcXVlc3Q6IGFueSkgPT4gdm9pZCkgPT4ge1xyXG4gICAgICAgIChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmRvbmVMaXN0ZW5lcnMucHVzaChoYW5kbGVyKTtcclxuICAgIH07XHJcblxyXG4gICAgKG1hbnl3aG8gYXMgYW55KS5ldmVudE1hbmFnZXIuYWRkRmFpbExpc3RlbmVyID0gKGhhbmRsZXI6ICh4aHI6IFhNTEh0dHBSZXF1ZXN0LCByZXF1ZXN0OiBhbnkpID0+IHZvaWQpID0+IHtcclxuICAgICAgICAobWFueXdobyBhcyBhbnkpLmV2ZW50TWFuYWdlci5mYWlsTGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XHJcbiAgICB9O1xyXG5cclxuICAgIG1hbnl3aG8uc2V0dGluZ3MuaW5pdGlhbGl6ZShudWxsLCB7XHJcbiAgICAgICAgaW52b2tlOiB7XHJcbiAgICAgICAgICAgIGJlZm9yZVNlbmQ6IChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmJlZm9yZVNlbmQsXHJcbiAgICAgICAgICAgIGRvbmU6IChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmRvbmUsXHJcbiAgICAgICAgICAgIGZhaWw6IChtYW55d2hvIGFzIGFueSkuZXZlbnRNYW5hZ2VyLmZhaWwsXHJcbiAgICAgICAgfSxcclxuICAgIH0pO1xyXG59XHJcblxyXG5tYW55d2hvLmV2ZW50TWFuYWdlci5hZGRCZWZvcmVTZW5kTGlzdGVuZXIoT01iZWZvcmVTZW5kSGFuZGxlcik7XHJcbm1hbnl3aG8uZXZlbnRNYW5hZ2VyLmFkZERvbmVMaXN0ZW5lcihPTWRvbmVIYW5kbGVyKTtcclxuXHJcbmZ1bmN0aW9uIE9NYXV0b0Nsb3NlKG91dGNvbWUgOiBhbnksIHhociA6IGFueSwgcmVxdWVzdDogYW55KVxyXG57XHJcbiAgICB3aW5kb3cuY2xvc2UoKTtcclxuICAgIHJldHVybjtcclxufVxyXG5cclxuZnVuY3Rpb24gT01hdXRvTmF2KG91dGNvbWUgOiBhbnksIHhociA6IGFueSwgcmVxdWVzdDogYW55KVxyXG57XHJcbiAgICB2YXIgdGFyZ2V0VXJsID0gb3V0Y29tZS5hdHRyaWJ1dGVzLkF1dG9OYXZVcmwgfHwgXCJcIjtcclxuXHJcbiAgICBpZih0YXJnZXRVcmwgJiYgdGFyZ2V0VXJsLmxlbmd0aCA+IDApXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIHduZCA9IHdpbmRvdy5vcGVuKHRhcmdldFVybCwgXCJfc2VsZlwiKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICBhbGVydChcIk5vIEF1dG9OYXZVcmwgc3BlY2lmaWVkIGluIHRoZSBvdXRjb21lJ3MgYXR0cmlidXRlc1wiKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBPTWF1dG9PcGVuKG91dGNvbWUgOiBhbnksIHhociA6IGFueSwgcmVxdWVzdDogYW55KVxyXG57XHJcblxyXG4gICAgdmFyIHRhcmdldFVybCA9IG91dGNvbWUuYXR0cmlidXRlcy5BdXRvT3BlblVybCB8fCBcIlwiO1xyXG5cclxuICAgIGlmKHRhcmdldFVybCAmJiB0YXJnZXRVcmwubGVuZ3RoID4gMClcclxuICAgIHtcclxuICAgICAgICB2YXIgd25kID0gd2luZG93Lm9wZW4odGFyZ2V0VXJsLCBcIl9ibGFua1wiKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICBhbGVydChcIk5vIEF1dG9PcGVuVXJsIHNwZWNpZmllZCBpbiB0aGUgb3V0Y29tZSdzIGF0dHJpYnV0ZXNcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLypcclxuICAgIC8vdGhlIG91dGNvbWUncyAucGFnZU9iamVjdEJpbmRpbmdJZCB0ZWxscyB1cyB3aGljaCBjb21wb25lbnQgdHJpZ2dlcmVkIHRoZSBvdXRjb21lIGFuZCBpbnNlcnRlZCB0aGUgZGF0YVxyXG4gICAgdmFyIHRyaWdnZXJDb21wb25lbnQ9b3V0Y29tZS5wYWdlT2JqZWN0QmluZGluZ0lkO1xyXG5cclxuICAgIC8vZ2V0IHRoZSByZXNwb25zZSBmb3IgdGhlIGNvcnJlY3QgY29tcG9uZW50XHJcbiAgICB2YXIgcmVzcG9uc2UgOiBhbnk7XHJcbiAgICBmb3IodmFyIHBvcyA9IDAgOyBwb3MgPCByZXF1ZXN0Lm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0LnBhZ2VSZXF1ZXN0LnBhZ2VDb21wb25lbnRJbnB1dFJlc3BvbnNlcy5sZW5ndGggOyBwb3MrKylcclxuICAgIHtcclxuICAgICAgICB2YXIgaXRlbSA9IHJlcXVlc3QubWFwRWxlbWVudEludm9rZVJlcXVlc3QucGFnZVJlcXVlc3QucGFnZUNvbXBvbmVudElucHV0UmVzcG9uc2VzW3Bvc107XHJcbiAgICAgICAgaWYoaXRlbS5wYWdlQ29tcG9uZW50SWQgPT09IHRyaWdnZXJDb21wb25lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXNwb25zZSA9IGl0ZW07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZihyZXNwb25zZSlcclxuICAgIHtcclxuICAgICAgICB2YXIgdGFyZ2V0VXJpID0gcmVzcG9uc2UuY29udGVudFZhbHVlO1xyXG4gICAgICAgIHZhciB3bmQgPSB3aW5kb3cub3Blbih0YXJnZXRVcmksIFwiX2JsYW5rXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIGFsZXJ0KFwiZmFpbGVkIHRvIGdldCB1cmkgLSBwYWdlT2JqZWN0QmluZGluZ0lkIG5vdCBmb3VuZCBpbiBwYWdlQ29tcG9uZW50SW5wdXRSZXNwb25zZXNcIik7XHJcbiAgICB9XHJcbiAgICAqL1xyXG59XHJcblxyXG5mdW5jdGlvbiBPTWZvcmNlUHJpbnQob3V0Y29tZSA6IGFueSwgeGhyIDogYW55LCByZXF1ZXN0OiBhbnkpXHJcbntcclxuICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgcmV0dXJuO1xyXG59XHJcbiAgICBcclxuZnVuY3Rpb24gT01kb25lSGFuZGxlcih4aHI6IGFueSAsIHJlcXVlc3Q6IGFueSlcclxue1xyXG4gICAgLy9jaGVjayBjbG9zZSBmbGFnIGFuZCBpZiBzZXQganVzdCBraWxsIHRoZSB3aW5kb3dcclxuICAgIGlmKCBtYW55d2hvLk91dGNvbWVNYW5hZ2VyICYmIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc2VsZWN0ZWRPdXRjb21lICYmIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc2VsZWN0ZWRPdXRjb21lLmF0dHJpYnV0ZXMgKVxyXG4gICAge1xyXG4gICAgICAgIC8vbG9vcCBvdmVyIGVhY2ggb3V0Y29tZSBhbmQgY2FsbCBpdHMgYXNzb2NpYXRlZCBoYW5kbGVyIGluIHRoZSBwbGF5ZXIgaWYgaXQgZXhpc3RzXHJcbiAgICAgICAgLy9zb21lIGRlZmF1bHQgY29tbW9uIG9uZXMgd2lsbCBkZWZhdWx0IHRvIHRoZSBoYW5kbGVycyBpbiAgaGVyZSBpZiBub3QuXHJcbiAgICAgICAgZm9yKCB2YXIga2V5IGluIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc2VsZWN0ZWRPdXRjb21lLmF0dHJpYnV0ZXMgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYobWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1trZXldICYmIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc2VsZWN0ZWRPdXRjb21lLmF0dHJpYnV0ZXNba2V5XSA9PT0gXCJ0cnVlXCIpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHZhciBmdW5jdGlvbk5hbWUgPSBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLmhhbmRsZXJzW2tleV07XHJcbiAgICAgICAgICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLmhhbmRsZXJzW2tleV0obWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUsIHhociwgbWFueXdoby5PdXRjb21lTWFuYWdlci5vcmlnaW5hbFJlcXVlc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy90aGlzIHNhdmVzIHRoZSBsYXN0IHNlbGVjdGVkIG91dGNvbWUgaW4gdGhlIE91dGNvbWVNYW5hZ2VyICAgICAgICAgICBcclxuZnVuY3Rpb24gT01iZWZvcmVTZW5kSGFuZGxlcih4aHI6IGFueSwgcmVxdWVzdDogYW55IClcclxue1xyXG4gICAgaWYocmVxdWVzdClcclxuICAgIHtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLm9yaWdpbmFsUmVxdWVzdCAgPSByZXF1ZXN0O1xyXG4gICAgICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc3RhdGVJZCA9IHJlcXVlc3Quc3RhdGVJZDtcclxuICAgICAgICB2YXIgb3V0Y29tZUlkID0gcmVxdWVzdC5tYXBFbGVtZW50SW52b2tlUmVxdWVzdC5zZWxlY3RlZE91dGNvbWVJZDtcclxuICAgICAgICBpZihtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnRlbmFudElkICYmIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc3RhdGVJZCAmJiBvdXRjb21lSWQgKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdmFyIGZsb3dLZXkgPSBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnRlbmFudElkICsgXCJfX19cIiArIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc3RhdGVJZDtcclxuICAgICAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUgPSBtYW55d2hvLm1vZGVsLmdldE91dGNvbWUoIG91dGNvbWVJZCAgLCAgZmxvd0tleSApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLm9yaWdpbmFsUmVxdWVzdCAgPSBudWxsO1xyXG4gICAgICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc3RhdGVJZCA9IFwiXCI7XHJcbiAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUgPSBudWxsO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBPdXRjb21lTWFuYWdlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxhbnksIGFueT4gXHJcbntcclxufVxyXG5cclxubWFueXdoby5jb21wb25lbnQucmVnaXN0ZXIoJ091dGNvbWVNYW5hZ2VyJywgT3V0Y29tZU1hbmFnZXIpO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgT3V0Y29tZU1hbmFnZXI7XHJcblxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvT3V0Y29tZU1hbmFnZXIudHN4IiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIlJlYWN0XCJcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sInNvdXJjZVJvb3QiOiIifQ==