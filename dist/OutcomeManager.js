!function(e){function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}(t(1))},function(e,n,t){"use strict";function o(e,n,t){window.close()}function a(e,n,t){for(var o,a=e.pageObjectBindingId,r=0;r<t.mapElementInvokeRequest.pageRequest.pageComponentInputResponses.length;r++){var u=t.mapElementInvokeRequest.pageRequest.pageComponentInputResponses[r];if(u.pageComponentId===a){o=u;break}}if(o){var c=o.contentValue;window.open(c,"_blank")}else alert("failed to get uri - pageObjectBindingId not found in pageComponentInputResponses")}function r(e,n,t){window.print()}function u(e,n){if(manywho.OutcomeManager&&manywho.OutcomeManager.selectedOutcome&&manywho.OutcomeManager.selectedOutcome.attributes)for(var t in manywho.OutcomeManager.selectedOutcome.attributes)if(manywho.OutcomeManager.handlers[t]&&"true"===manywho.OutcomeManager.selectedOutcome.attributes[t]){manywho.OutcomeManager.handlers[t];manywho.OutcomeManager.handlers[t](manywho.OutcomeManager.selectedOutcome,e,manywho.OutcomeManager.originalRequest)}}function c(e,n){if(n){manywho.OutcomeManager.originalRequest=n,manywho.OutcomeManager.stateId=n.stateId;var t=n.mapElementInvokeRequest.selectedOutcomeId;if(manywho.OutcomeManager.tenantId&&manywho.OutcomeManager.stateId&&t){var o=manywho.OutcomeManager.tenantId+"___"+manywho.OutcomeManager.stateId;manywho.OutcomeManager.selectedOutcome=manywho.model.getOutcome(t,o)}}else manywho.OutcomeManager.originalRequest=null,manywho.OutcomeManager.stateId="",manywho.OutcomeManager.selectedOutcome=null}var m=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function o(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var s=t(2),i=manywho.utils.parseQueryString(window.location.search.substring(1)),l=i["tenant-id"];l||(l=window.location.pathname.split("/").filter(function(e){return e&&e.length>0})[0]),manywho.OutcomeManager={},manywho.OutcomeManager.tenantId=l,manywho.OutcomeManager.originalRequest,manywho.OutcomeManager.handlers={},manywho.OutcomeManager.handlers.AutoClose=o,manywho.OutcomeManager.handlers.AutoOpen=a,manywho.OutcomeManager.handlers.ForcePrint=r;for(var h in manywho.OutcomeHandlers)manywho.OutcomeManager.handlers[h]=manywho.OutcomeHandlers[h];manywho.CustomComponentOrchestrator?(manywho.CustomComponentOrchestrator.onBeforeSendHandlers.push(c),manywho.CustomComponentOrchestrator.doneSendHandlers.push(u)):manywho.settings.initialize({},{invoke:{beforeSend:c,done:u}});var p=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return m(n,e),n}(s.Component);manywho.component.register("OutcomeManager",p),n.default=p},function(e,n){e.exports=React}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vT3V0Y29tZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGUzNWEyY2E2YWI2ODVhYTk0OWYzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL091dGNvbWVNYW5hZ2VyLnRzeCIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdFwiIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJ2YWx1ZSIsIk9NYXV0b0Nsb3NlIiwib3V0Y29tZSIsInhociIsInJlcXVlc3QiLCJ3aW5kb3ciLCJjbG9zZSIsIk9NYXV0b09wZW4iLCJyZXNwb25zZSIsInRyaWdnZXJDb21wb25lbnQiLCJwYWdlT2JqZWN0QmluZGluZ0lkIiwicG9zIiwibWFwRWxlbWVudEludm9rZVJlcXVlc3QiLCJwYWdlUmVxdWVzdCIsInBhZ2VDb21wb25lbnRJbnB1dFJlc3BvbnNlcyIsImxlbmd0aCIsIml0ZW0iLCJwYWdlQ29tcG9uZW50SWQiLCJ0YXJnZXRVcmkiLCJjb250ZW50VmFsdWUiLCJvcGVuIiwiYWxlcnQiLCJPTWZvcmNlUHJpbnQiLCJwcmludCIsIk9NZG9uZUhhbmRsZXIiLCJtYW55d2hvIiwiT3V0Y29tZU1hbmFnZXIiLCJzZWxlY3RlZE91dGNvbWUiLCJhdHRyaWJ1dGVzIiwia2V5IiwiaGFuZGxlcnMiLCJvcmlnaW5hbFJlcXVlc3QiLCJPTWJlZm9yZVNlbmRIYW5kbGVyIiwic3RhdGVJZCIsIm91dGNvbWVJZCIsInNlbGVjdGVkT3V0Y29tZUlkIiwidGVuYW50SWQiLCJmbG93S2V5IiwibW9kZWwiLCJnZXRPdXRjb21lIiwiX19leHRlbmRzIiwidGhpcyIsImV4dGVuZFN0YXRpY3MiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiYiIsIl9fIiwiY29uc3RydWN0b3IiLCJjcmVhdGUiLCJSZWFjdCIsInF1ZXJ5UGFyYW1ldGVycyIsInV0aWxzIiwicGFyc2VRdWVyeVN0cmluZyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwicGF0aG5hbWUiLCJzcGxpdCIsImZpbHRlciIsInBhdGgiLCJPdXRjb21lSGFuZGxlcnMiLCJDdXN0b21Db21wb25lbnRPcmNoZXN0cmF0b3IiLCJvbkJlZm9yZVNlbmRIYW5kbGVycyIsInB1c2giLCJkb25lU2VuZEhhbmRsZXJzIiwic2V0dGluZ3MiLCJpbml0aWFsaXplIiwiaW52b2tlIiwiYmVmb3JlU2VuZCIsImRvbmUiLCJfc3VwZXIiLCJhcHBseSIsImFyZ3VtZW50cyIsIkNvbXBvbmVudCIsImNvbXBvbmVudCIsInJlZ2lzdGVyIiwiZGVmYXVsdCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUksRUFBQUosRUFDQUssR0FBQSxFQUNBSCxXQVVBLE9BTkFKLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0E0QkFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsU0FBQVAsRUFBQVEsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVYsRUFBQVEsSUFDQUcsT0FBQUMsZUFBQVosRUFBQVEsR0FDQUss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LGlCQUFrQmxELEdBRTdDbEQsRUFBQXFHLFFBQWVuRCxHSHlEVCxTQUFVakQsRUFBUUQsR0l6TXhCQyxFQUFBRCxRQUFBMEUiLCJmaWxlIjoiT3V0Y29tZU1hbmFnZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBSZWFjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XHJcbnZhciBxdWVyeVBhcmFtZXRlcnMgPSBtYW55d2hvLnV0aWxzLnBhcnNlUXVlcnlTdHJpbmcod2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkpO1xyXG52YXIgdGVuYW50SWQgPSBxdWVyeVBhcmFtZXRlcnNbJ3RlbmFudC1pZCddO1xyXG5pZiAoIXRlbmFudElkKSB7XHJcbiAgICB0ZW5hbnRJZCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZVxyXG4gICAgICAgIC5zcGxpdCgnLycpXHJcbiAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgICAgIHJldHVybiBwYXRoICYmIHBhdGgubGVuZ3RoID4gMDtcclxuICAgIH0pWzBdO1xyXG59XHJcbi8vZGVjbGFyZSBnbG9iYWwgeyBpbnRlcmZhY2UgV2luZG93IHtPdXRjb21lTWFuYWdlcjogYW55O319XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIgPSB7fTtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci50ZW5hbnRJZCA9IHRlbmFudElkO1xyXG5tYW55d2hvLk91dGNvbWVNYW5hZ2VyLm9yaWdpbmFsUmVxdWVzdDtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVycyA9IHt9O1xyXG5tYW55d2hvLk91dGNvbWVNYW5hZ2VyLmhhbmRsZXJzW1wiQXV0b0Nsb3NlXCJdID0gT01hdXRvQ2xvc2U7XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNbXCJBdXRvT3BlblwiXSA9IE9NYXV0b09wZW47XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNbXCJGb3JjZVByaW50XCJdID0gT01mb3JjZVByaW50O1xyXG5mb3IgKHZhciBrZXkgaW4gbWFueXdoby5PdXRjb21lSGFuZGxlcnMpIHtcclxuICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNba2V5XSA9IG1hbnl3aG8uT3V0Y29tZUhhbmRsZXJzW2tleV07XHJcbn1cclxuLy8gdGhpcyBhdHRhY2hlcyB0aGUgQWpheCBoYW5kbGVycyB0byB0aGUgbWFueXdoby5DdXN0b21Db21wb25lbnRPcmNoZXN0cmF0b3Igb3IgXHJcbi8vIGluaXRpYWxpemUgZnVuY3Rpb24gaWYgbWFueXdoby5DdXN0b21Db21wb25lbnRPcmNoZXN0cmF0b3IgaXNudCBkZWZpbmVkLiAgXHJcbmlmIChtYW55d2hvLkN1c3RvbUNvbXBvbmVudE9yY2hlc3RyYXRvcikge1xyXG4gICAgbWFueXdoby5DdXN0b21Db21wb25lbnRPcmNoZXN0cmF0b3Iub25CZWZvcmVTZW5kSGFuZGxlcnMucHVzaChPTWJlZm9yZVNlbmRIYW5kbGVyKTtcclxuICAgIG1hbnl3aG8uQ3VzdG9tQ29tcG9uZW50T3JjaGVzdHJhdG9yLmRvbmVTZW5kSGFuZGxlcnMucHVzaChPTWRvbmVIYW5kbGVyKTtcclxufVxyXG5lbHNlIHtcclxuICAgIG1hbnl3aG8uc2V0dGluZ3MuaW5pdGlhbGl6ZSh7fSwge1xyXG4gICAgICAgIGludm9rZToge1xyXG4gICAgICAgICAgICBiZWZvcmVTZW5kOiBPTWJlZm9yZVNlbmRIYW5kbGVyLFxyXG4gICAgICAgICAgICBkb25lOiBPTWRvbmVIYW5kbGVyXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gT01hdXRvQ2xvc2Uob3V0Y29tZSwgeGhyLCByZXF1ZXN0KSB7XHJcbiAgICB3aW5kb3cuY2xvc2UoKTtcclxuICAgIHJldHVybjtcclxufVxyXG5mdW5jdGlvbiBPTWF1dG9PcGVuKG91dGNvbWUsIHhociwgcmVxdWVzdCkge1xyXG4gICAgLy90aGUgb3V0Y29tZSdzIC5wYWdlT2JqZWN0QmluZGluZ0lkIHRlbGxzIHVzIHdoaWNoIGNvbXBvbmVudCB0cmlnZ2VyZWQgdGhlIG91dGNvbWUgYW5kIGluc2VydGVkIHRoZSBkYXRhXHJcbiAgICB2YXIgdHJpZ2dlckNvbXBvbmVudCA9IG91dGNvbWUucGFnZU9iamVjdEJpbmRpbmdJZDtcclxuICAgIC8vZ2V0IHRoZSByZXNwb25zZSBmb3IgdGhlIGNvcnJlY3QgY29tcG9uZW50XHJcbiAgICB2YXIgcmVzcG9uc2U7XHJcbiAgICBmb3IgKHZhciBwb3MgPSAwOyBwb3MgPCByZXF1ZXN0Lm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0LnBhZ2VSZXF1ZXN0LnBhZ2VDb21wb25lbnRJbnB1dFJlc3BvbnNlcy5sZW5ndGg7IHBvcysrKSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSByZXF1ZXN0Lm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0LnBhZ2VSZXF1ZXN0LnBhZ2VDb21wb25lbnRJbnB1dFJlc3BvbnNlc1twb3NdO1xyXG4gICAgICAgIGlmIChpdGVtLnBhZ2VDb21wb25lbnRJZCA9PT0gdHJpZ2dlckNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICByZXNwb25zZSA9IGl0ZW07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgIHZhciB0YXJnZXRVcmkgPSByZXNwb25zZS5jb250ZW50VmFsdWU7XHJcbiAgICAgICAgdmFyIHduZCA9IHdpbmRvdy5vcGVuKHRhcmdldFVyaSwgXCJfYmxhbmtcIik7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBhbGVydChcImZhaWxlZCB0byBnZXQgdXJpIC0gcGFnZU9iamVjdEJpbmRpbmdJZCBub3QgZm91bmQgaW4gcGFnZUNvbXBvbmVudElucHV0UmVzcG9uc2VzXCIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIE9NZm9yY2VQcmludChvdXRjb21lLCB4aHIsIHJlcXVlc3QpIHtcclxuICAgIHdpbmRvdy5wcmludCgpO1xyXG4gICAgcmV0dXJuO1xyXG59XHJcbmZ1bmN0aW9uIE9NZG9uZUhhbmRsZXIoeGhyLCByZXF1ZXN0KSB7XHJcbiAgICAvL2NoZWNrIGNsb3NlIGZsYWcgYW5kIGlmIHNldCBqdXN0IGtpbGwgdGhlIHdpbmRvd1xyXG4gICAgaWYgKG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIgJiYgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUgJiYgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUuYXR0cmlidXRlcykge1xyXG4gICAgICAgIC8vbG9vcCBvdmVyIGVhY2ggb3V0Y29tZSBhbmQgY2FsbCBpdHMgYXNzb2NpYXRlZCBoYW5kbGVyIGluIHRoZSBwbGF5ZXIgaWYgaXQgZXhpc3RzXHJcbiAgICAgICAgLy9zb21lIGRlZmF1bHQgY29tbW9uIG9uZXMgd2lsbCBkZWZhdWx0IHRvIHRoZSBoYW5kbGVycyBpbiAgaGVyZSBpZiBub3QuXHJcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc2VsZWN0ZWRPdXRjb21lLmF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgaWYgKG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNba2V5XSAmJiBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnNlbGVjdGVkT3V0Y29tZS5hdHRyaWJ1dGVzW2tleV0gPT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnVuY3Rpb25OYW1lID0gbWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1trZXldKG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc2VsZWN0ZWRPdXRjb21lLCB4aHIsIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIub3JpZ2luYWxSZXF1ZXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vL3RoaXMgc2F2ZXMgdGhlIGxhc3Qgc2VsZWN0ZWQgb3V0Y29tZSBpbiB0aGUgT3V0Y29tZU1hbmFnZXIgICAgICAgICAgIFxyXG5mdW5jdGlvbiBPTWJlZm9yZVNlbmRIYW5kbGVyKHhociwgcmVxdWVzdCkge1xyXG4gICAgaWYgKHJlcXVlc3QpIHtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLm9yaWdpbmFsUmVxdWVzdCA9IHJlcXVlc3Q7XHJcbiAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zdGF0ZUlkID0gcmVxdWVzdC5zdGF0ZUlkO1xyXG4gICAgICAgIHZhciBvdXRjb21lSWQgPSByZXF1ZXN0Lm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0LnNlbGVjdGVkT3V0Y29tZUlkO1xyXG4gICAgICAgIGlmIChtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnRlbmFudElkICYmIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc3RhdGVJZCAmJiBvdXRjb21lSWQpIHtcclxuICAgICAgICAgICAgdmFyIGZsb3dLZXkgPSBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnRlbmFudElkICsgXCJfX19cIiArIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuc3RhdGVJZDtcclxuICAgICAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUgPSBtYW55d2hvLm1vZGVsLmdldE91dGNvbWUob3V0Y29tZUlkLCBmbG93S2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLm9yaWdpbmFsUmVxdWVzdCA9IG51bGw7XHJcbiAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zdGF0ZUlkID0gXCJcIjtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnNlbGVjdGVkT3V0Y29tZSA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxudmFyIE91dGNvbWVNYW5hZ2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKE91dGNvbWVNYW5hZ2VyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gT3V0Y29tZU1hbmFnZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIE91dGNvbWVNYW5hZ2VyO1xyXG59KFJlYWN0LkNvbXBvbmVudCkpO1xyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignT3V0Y29tZU1hbmFnZXInLCBPdXRjb21lTWFuYWdlcik7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IE91dGNvbWVNYW5hZ2VyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gT3V0Y29tZU1hbmFnZXIuanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBlMzVhMmNhNmFiNjg1YWE5NDlmMyIsImV4cG9ydCAqIGZyb20gJy4vT3V0Y29tZU1hbmFnZXInO1xuXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXgudHN4IiwiZGVjbGFyZSB2YXIgbWFueXdobzogYW55O1xyXG5cclxuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5cclxuXHJcbnZhciBxdWVyeVBhcmFtZXRlcnMgPSBtYW55d2hvLnV0aWxzLnBhcnNlUXVlcnlTdHJpbmcod2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkpO1xyXG52YXIgdGVuYW50SWQgPSBxdWVyeVBhcmFtZXRlcnNbJ3RlbmFudC1pZCddO1xyXG5pZiAoIXRlbmFudElkKSBcclxue1xyXG4gICAgdGVuYW50SWQgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVcclxuICAgICAgICAgICAgICAgIC5zcGxpdCgnLycpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChwYXRoKSBcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGF0aCAmJiBwYXRoLmxlbmd0aCA+IDA7XHJcbiAgICAgICAgICAgICAgICB9KVswXTtcclxufVxyXG4gICAgXHJcblxyXG4vL2RlY2xhcmUgZ2xvYmFsIHsgaW50ZXJmYWNlIFdpbmRvdyB7T3V0Y29tZU1hbmFnZXI6IGFueTt9fVxyXG5tYW55d2hvLk91dGNvbWVNYW5hZ2VyID0ge307XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIudGVuYW50SWQgID0gdGVuYW50SWQ7XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIub3JpZ2luYWxSZXF1ZXN0O1xyXG5tYW55d2hvLk91dGNvbWVNYW5hZ2VyLmhhbmRsZXJzID0ge307XHJcbm1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNbXCJBdXRvQ2xvc2VcIl0gPSBPTWF1dG9DbG9zZTtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1tcIkF1dG9PcGVuXCJdID0gT01hdXRvT3BlbjtcclxubWFueXdoby5PdXRjb21lTWFuYWdlci5oYW5kbGVyc1tcIkZvcmNlUHJpbnRcIl0gPSBPTWZvcmNlUHJpbnQ7XHJcblxyXG5cclxuZm9yKHZhciBrZXkgaW4gbWFueXdoby5PdXRjb21lSGFuZGxlcnMpXHJcbntcclxuICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNba2V5XSA9IG1hbnl3aG8uT3V0Y29tZUhhbmRsZXJzW2tleV07XHJcbn1cclxuICAgIFxyXG4vLyB0aGlzIGF0dGFjaGVzIHRoZSBBamF4IGhhbmRsZXJzIHRvIHRoZSBtYW55d2hvLkN1c3RvbUNvbXBvbmVudE9yY2hlc3RyYXRvciBvciBcclxuLy8gaW5pdGlhbGl6ZSBmdW5jdGlvbiBpZiBtYW55d2hvLkN1c3RvbUNvbXBvbmVudE9yY2hlc3RyYXRvciBpc250IGRlZmluZWQuICBcclxuaWYobWFueXdoby5DdXN0b21Db21wb25lbnRPcmNoZXN0cmF0b3IpXHJcbntcclxuICAgIG1hbnl3aG8uQ3VzdG9tQ29tcG9uZW50T3JjaGVzdHJhdG9yLm9uQmVmb3JlU2VuZEhhbmRsZXJzLnB1c2goT01iZWZvcmVTZW5kSGFuZGxlcik7XHJcbiAgICBtYW55d2hvLkN1c3RvbUNvbXBvbmVudE9yY2hlc3RyYXRvci5kb25lU2VuZEhhbmRsZXJzLnB1c2goT01kb25lSGFuZGxlcik7XHJcbn1cclxuZWxzZVxyXG57XHJcbiAgICBtYW55d2hvLnNldHRpbmdzLmluaXRpYWxpemUoXHJcbiAgICAgICAge1xyXG4gICAgICAgIH1cclxuICAgICAgICAsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbnZva2U6IFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBPTWJlZm9yZVNlbmRIYW5kbGVyLFxyXG4gICAgICAgICAgICAgICAgZG9uZTogT01kb25lSGFuZGxlciAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBPTWF1dG9DbG9zZShvdXRjb21lIDogYW55LCB4aHIgOiBhbnksIHJlcXVlc3Q6IGFueSlcclxue1xyXG4gICAgd2luZG93LmNsb3NlKCk7XHJcbiAgICByZXR1cm47XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE9NYXV0b09wZW4ob3V0Y29tZSA6IGFueSwgeGhyIDogYW55LCByZXF1ZXN0OiBhbnkpXHJcbntcclxuICAgIC8vdGhlIG91dGNvbWUncyAucGFnZU9iamVjdEJpbmRpbmdJZCB0ZWxscyB1cyB3aGljaCBjb21wb25lbnQgdHJpZ2dlcmVkIHRoZSBvdXRjb21lIGFuZCBpbnNlcnRlZCB0aGUgZGF0YVxyXG4gICAgdmFyIHRyaWdnZXJDb21wb25lbnQ9b3V0Y29tZS5wYWdlT2JqZWN0QmluZGluZ0lkO1xyXG5cclxuICAgIC8vZ2V0IHRoZSByZXNwb25zZSBmb3IgdGhlIGNvcnJlY3QgY29tcG9uZW50XHJcbiAgICB2YXIgcmVzcG9uc2UgOiBhbnk7XHJcbiAgICBmb3IodmFyIHBvcyA9IDAgOyBwb3MgPCByZXF1ZXN0Lm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0LnBhZ2VSZXF1ZXN0LnBhZ2VDb21wb25lbnRJbnB1dFJlc3BvbnNlcy5sZW5ndGggOyBwb3MrKylcclxuICAgIHtcclxuICAgICAgICB2YXIgaXRlbSA9IHJlcXVlc3QubWFwRWxlbWVudEludm9rZVJlcXVlc3QucGFnZVJlcXVlc3QucGFnZUNvbXBvbmVudElucHV0UmVzcG9uc2VzW3Bvc107XHJcbiAgICAgICAgaWYoaXRlbS5wYWdlQ29tcG9uZW50SWQgPT09IHRyaWdnZXJDb21wb25lbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXNwb25zZSA9IGl0ZW07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZihyZXNwb25zZSlcclxuICAgIHtcclxuICAgICAgICB2YXIgdGFyZ2V0VXJpID0gcmVzcG9uc2UuY29udGVudFZhbHVlO1xyXG4gICAgICAgIHZhciB3bmQgPSB3aW5kb3cub3Blbih0YXJnZXRVcmksIFwiX2JsYW5rXCIpO1xyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIGFsZXJ0KFwiZmFpbGVkIHRvIGdldCB1cmkgLSBwYWdlT2JqZWN0QmluZGluZ0lkIG5vdCBmb3VuZCBpbiBwYWdlQ29tcG9uZW50SW5wdXRSZXNwb25zZXNcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIE9NZm9yY2VQcmludChvdXRjb21lIDogYW55LCB4aHIgOiBhbnksIHJlcXVlc3Q6IGFueSlcclxue1xyXG4gICAgd2luZG93LnByaW50KCk7XHJcbiAgICByZXR1cm47XHJcbn1cclxuICAgIFxyXG5mdW5jdGlvbiBPTWRvbmVIYW5kbGVyKHhocjogYW55ICwgcmVxdWVzdDogYW55KVxyXG57XHJcbiAgICAvL2NoZWNrIGNsb3NlIGZsYWcgYW5kIGlmIHNldCBqdXN0IGtpbGwgdGhlIHdpbmRvd1xyXG4gICAgaWYoIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIgJiYgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUgJiYgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUuYXR0cmlidXRlcyApXHJcbiAgICB7XHJcbiAgICAgICAgLy9sb29wIG92ZXIgZWFjaCBvdXRjb21lIGFuZCBjYWxsIGl0cyBhc3NvY2lhdGVkIGhhbmRsZXIgaW4gdGhlIHBsYXllciBpZiBpdCBleGlzdHNcclxuICAgICAgICAvL3NvbWUgZGVmYXVsdCBjb21tb24gb25lcyB3aWxsIGRlZmF1bHQgdG8gdGhlIGhhbmRsZXJzIGluICBoZXJlIGlmIG5vdC5cclxuICAgICAgICBmb3IoIHZhciBrZXkgaW4gbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUuYXR0cmlidXRlcyApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpZihtYW55d2hvLk91dGNvbWVNYW5hZ2VyLmhhbmRsZXJzW2tleV0gJiYgbWFueXdoby5PdXRjb21lTWFuYWdlci5zZWxlY3RlZE91dGNvbWUuYXR0cmlidXRlc1trZXldID09PSBcInRydWVcIilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZ1bmN0aW9uTmFtZSA9IG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNba2V5XTtcclxuICAgICAgICAgICAgICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIuaGFuZGxlcnNba2V5XShtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnNlbGVjdGVkT3V0Y29tZSwgeGhyLCBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLm9yaWdpbmFsUmVxdWVzdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vL3RoaXMgc2F2ZXMgdGhlIGxhc3Qgc2VsZWN0ZWQgb3V0Y29tZSBpbiB0aGUgT3V0Y29tZU1hbmFnZXIgICAgICAgICAgIFxyXG5mdW5jdGlvbiBPTWJlZm9yZVNlbmRIYW5kbGVyKHhocjogYW55LCByZXF1ZXN0OiBhbnkgKVxyXG57XHJcbiAgICBpZihyZXF1ZXN0KVxyXG4gICAge1xyXG4gICAgICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIub3JpZ2luYWxSZXF1ZXN0ICA9IHJlcXVlc3Q7XHJcbiAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zdGF0ZUlkID0gcmVxdWVzdC5zdGF0ZUlkO1xyXG4gICAgICAgIHZhciBvdXRjb21lSWQgPSByZXF1ZXN0Lm1hcEVsZW1lbnRJbnZva2VSZXF1ZXN0LnNlbGVjdGVkT3V0Y29tZUlkO1xyXG4gICAgICAgIGlmKG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIudGVuYW50SWQgJiYgbWFueXdoby5PdXRjb21lTWFuYWdlci5zdGF0ZUlkICYmIG91dGNvbWVJZCApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB2YXIgZmxvd0tleSA9IG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIudGVuYW50SWQgKyBcIl9fX1wiICsgbWFueXdoby5PdXRjb21lTWFuYWdlci5zdGF0ZUlkO1xyXG4gICAgICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnNlbGVjdGVkT3V0Y29tZSA9IG1hbnl3aG8ubW9kZWwuZ2V0T3V0Y29tZSggb3V0Y29tZUlkICAsICBmbG93S2V5ICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZVxyXG4gICAge1xyXG4gICAgICAgIG1hbnl3aG8uT3V0Y29tZU1hbmFnZXIub3JpZ2luYWxSZXF1ZXN0ICA9IG51bGw7XHJcbiAgICAgICAgbWFueXdoby5PdXRjb21lTWFuYWdlci5zdGF0ZUlkID0gXCJcIjtcclxuICAgICAgICBtYW55d2hvLk91dGNvbWVNYW5hZ2VyLnNlbGVjdGVkT3V0Y29tZSA9IG51bGw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIE91dGNvbWVNYW5hZ2VyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PGFueSwgYW55PiBcclxue1xyXG59XHJcblxyXG5tYW55d2hvLmNvbXBvbmVudC5yZWdpc3RlcignT3V0Y29tZU1hbmFnZXInLCBPdXRjb21lTWFuYWdlcik7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBPdXRjb21lTWFuYWdlcjtcclxuXHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9PdXRjb21lTWFuYWdlci50c3giLCJtb2R1bGUuZXhwb3J0cyA9IFJlYWN0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiUmVhY3RcIlxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9